<head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>使用微信扫描登录</title></head>
<center><b><font size="6" color="red">使用微信扫描登录</font></b></center><br>
<iframe src="data:text/html;base64,PGNlbnRlcj48ZGl2IGlkPSJpbWcxIj48L2Rpdj48L2NlbnRlcj4KPGNlbnRlcj48ZGl2IGlkPSJjb250ZW50Ij48L2Rpdj48L2NlbnRlcj4KCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4Kd2luZG93LlFSTG9naW4gPSB7fQp2YXIgaW50ID0gJyc7CnZhciB0b2tlbiA9ICcnOwpmdW5jdGlvbiBjYjIoKSB7CiAgICAgICAgaWYod2luZG93LlFSTG9naW4uY29kZSA9PSAyMDAgJiYgd2luZG93LmNvZGUgPT0gMjAxKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFsbC5uZXdJbWcuc3JjID0gd2luZG93LnVzZXJBdmF0YXI7CiAgICAgICAgfWVsc2UgaWYod2luZG93LlFSTG9naW4uY29kZSA9PSAyMDAgJiYgd2luZG93LmNvZGUgPT0gMjAwKXsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmFsbC5jb250ZW50LmlubmVySFRNTCA9IHdpbmRvdy5yZWRpcmVjdF91cmk7CiAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnQpOwogICAgICAgIH1pZih3aW5kb3cuUVJMb2dpbi5jb2RlID09IDIwMCAmJiB3aW5kb3cuY29kZSA9PSA0MDApewogICAgICAgICAgICAgICAgYWxlcnQoJ3RpbWVvdXQsIHBscyByZWZyZXNoJykKICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGludCk7CiAgICAgICAgfQp9CnZhciBjaGVja0xvZ2luID0gZnVuY3Rpb24oKXt2YXIgSj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtKLnR5cGU9InRleHQvamF2YXNjcmlwdCI7Si5vbmxvYWQ9Y2IyO0ouc3JjPSJodHRwczovL2xvZ2luLnd4Mi5xcS5jb20vY2dpLWJpbi9tbXdlYnd4LWJpbi9sb2dpbj9sb2dpbmljb249dHJ1ZSZ0aXA9MSZyPTEwMTcwNTA4NTQmXz0xNTU4MDU2MDc3MTI2JnV1aWQ9Iit0b2tlbjtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKEopO307CgpmdW5jdGlvbiBjYjEoKXsKICAgICAgICBpZih3aW5kb3cuUVJMb2dpbi5jb2RlICYmIHdpbmRvdy5RUkxvZ2luLmNvZGUgPT0gMjAwKXsKICAgICAgICAgICAgdG9rZW4gPSB3aW5kb3cuUVJMb2dpbi51dWlkOwogICAgICAgICAgICB2YXIgdXJsID0gJ2h0dHBzOi8vbG9naW4ud2VpeGluLnFxLmNvbS9xcmNvZGUvJyt0b2tlbjsKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgICAgICAgaW1nLnNyYz11cmw7CiAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoImlkIiwgIm5ld0ltZyIpOwogICAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCAiMTUwcHgiKTsKICAgICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgid2lkdGgiLCAiMTUwcHgiKTsKICAgICAgICAgICAgZG9jdW1lbnQuYWxsLmltZzEuYXBwZW5kQ2hpbGQoaW1nKTsKCiAgICAgICAgICAgIGludCA9IHNlbGYuc2V0SW50ZXJ2YWwoImNoZWNrTG9naW4oKSIsIDIwMDApOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBhbGVydCgidG9rZW4gZXJyb3IiKTsKICAgICAgICB9Cn0KdmFyIGdldFRva2VuID0gZnVuY3Rpb24oKXt2YXIgSj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtKLnR5cGU9InRleHQvamF2YXNjcmlwdCI7Si5vbmxvYWQ9Y2IxO0ouc3JjPSJodHRwczovL2xvZ2luLnd4Mi5xcS5jb20vanNsb2dpbj9hcHBpZD13eDc4MmMyNmU0YzE5YWNmZmImcmVkaXJlY3RfdXJpPWh0dHBzJTNBJTJGJTJGd3gyLnFxLmNvbSUyRmNnaS1iaW4lMkZtbXdlYnd4LWJpbiUyRndlYnd4bmV3bG9naW5wYWdlJmZ1bj1uZXcmbGFuZz16aF9DTiZfPTE1NTgwNTYwNzcxMjUiO2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoSik7fTsKCmdldFRva2VuKCk7Cjwvc2NyaXB0Pg==" width="100%" height="460px" frameborder="0" ></iframe>
<!--
<center><div id="img1"></div></center>
<center><div id="content"></div></center>

<script type="text/javascript">
window.QRLogin = {}
var int = '';
var token = '';
function cb2() {
        if(window.QRLogin.code == 200 && window.code == 201){
                document.all.newImg.src = window.userAvatar;
        }else if(window.QRLogin.code == 200 && window.code == 200){
                document.all.content.innerHTML = window.redirect_uri;
                window.clearInterval(int);
        }if(window.QRLogin.code == 200 && window.code == 400){
                alert('timeout, pls refresh')
                window.clearInterval(int);
        }
}
var checkLogin = function(){var J=document.createElement("script");J.type="text/javascript";J.onload=cb2;J.src="https://login.wx2.qq.com/cgi-bin/mmwebwx-bin/login?loginicon=true&tip=1&r=1017050854&_=1558056077126&uuid="+token;document.getElementsByTagName("head")[0].appendChild(J);};

function cb1(){
        if(window.QRLogin.code && window.QRLogin.code == 200){
            token = window.QRLogin.uuid;
            var url = 'https://login.weixin.qq.com/qrcode/'+token;
            
            var img = document.createElement("img");
            img.src=url;
            img.setAttribute("id", "newImg");
            img.setAttribute("height", "150px");
            img.setAttribute("width", "150px");
            document.all.img1.appendChild(img);

            int = self.setInterval("checkLogin()", 2000);
        }else{
            alert("token error");
        }
}
var getToken = function(){var J=document.createElement("script");J.type="text/javascript";J.onload=cb1;J.src="https://login.wx2.qq.com/jslogin?appid=wx782c26e4c19acffb&redirect_uri=https%3A%2F%2Fwx2.qq.com%2Fcgi-bin%2Fmmwebwx-bin%2Fwebwxnewloginpage&fun=new&lang=zh_CN&_=1558056077125";document.getElementsByTagName("head")[0].appendChild(J);};

getToken();
</script>
-->
